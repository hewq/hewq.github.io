window.__require=function t(e,i,r){function o(s,p){if(!i[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var h="function"==typeof __require&&__require;if(!p&&h)return h(c,!0);if(n)return n(c,!0);throw new Error("Cannot find module '"+s+"'")}s=c}var a=i[s]={exports:{}};e[s][0].call(a.exports,function(t){return o(e[s][1][t]||t)},a,a.exports,t,e,i,r)}return i[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<r.length;s++)o(r[s]);return o}({game:[function(t,e,i){"use strict";cc._RF.push(e,"6f2ecm+0z9JKqq/hw53dQUq","game");var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)},function(t,e){function i(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}),n=this&&this.__decorate||function(t,e,i,r){var o,n=arguments.length,s=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,i,r);else for(var p=t.length-1;p>=0;p--)(o=t[p])&&(s=(n<3?o(s):n>3?o(e,i,s):o(e,i))||s);return n>3&&s&&Object.defineProperty(e,i,s),s};Object.defineProperty(i,"__esModule",{value:!0});var s=cc._decorator,p=s.ccclass,c=s.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bg=null,e.circle=null,e.highlightCircle=null,e.ball=null,e.percent=null,e.game=null,e.jumps=0,e.jumpForce=0,e.jumpOffset=0,e.gravity=.8,e.speed=.6,e.currentAngle=0,e.previousAngle=0,e.distanceFromCenter=0,e.revolutions=0,e.paintedRatio=0,e.paintArcs=[],e.restartLock=!0,e}return o(e,t),e.prototype.start=function(){var t=[12,8];this.bg.rect(-this.node.width/2,-this.node.height/2,this.node.width,this.node.height),this.bg.fill(),this.circle.circle(0,0,this.circle.node.width/2),this.circle.stroke(),this.node.on("touchstart",function(){this.jumps<2&&(this.jumps++,this.jumpForce=t[this.jumps-1])},this)},e.prototype.update=function(){var t=this;this.revolutions=this.circle.node.width/2/(this.ball.node.width/2),this.distanceFromCenter=this.circle.node.width/2-this.ball.node.width/2-10-this.jumpOffset,this.previousAngle=this.currentAngle,this.currentAngle+=this.speed;var e=this.currentAngle/180*Math.PI%(2*Math.PI),i=this.previousAngle/180*Math.PI%(2*Math.PI);this.ball.node.angle=this.currentAngle*this.revolutions,this.ball.node.x=this.distanceFromCenter*Math.cos(e),this.ball.node.y=this.distanceFromCenter*Math.sin(e),this.jumps>0&&(this.jumpOffset+=this.jumpForce,this.jumpForce-=this.gravity,this.jumpOffset<0&&(this.jumpOffset=0,this.jumps=0,this.jumpForce=0)),0===this.jumpOffset&&(e>=i?this.paintArcs.push([i,e]):(this.paintArcs.push([0,e]),this.paintArcs.push([i,2*Math.PI])),this.paintArcs=this.mergeIntervals(this.paintArcs),this.highlightCircle.clear(),this.paintedRatio=0,this.paintArcs.forEach(function(e){t.paintedRatio+=e[1]-e[0],t.highlightCircle.arc(0,0,t.circle.node.width/2,e[0],e[1],!0),t.highlightCircle.stroke()}),this.paintedRatio=Math.round(this.paintedRatio/Math.PI*180/360*100),this.percent.string=this.paintedRatio+"%",100===this.paintedRatio&&this.restartLock&&(this.restartLock=!1,setTimeout(function(){t.restart()},2e3)))},e.prototype.restart=function(){this.paintArcs=[],this.previousAngle=0,this.currentAngle=0,this.restartLock=!0},e.prototype.mergeIntervals=function(t){if(t.length<=1)return t;var e=[],i=[];t=t.sort(function(t,e){return t[0]-e[0]}),e.push(t[0]);for(var r=1;r<t.length;r++)(i=e[e.length-1])[1]<t[r][0]?e.push(t[r]):i[1]<t[r][1]&&(i[1]=t[r][1],e.pop(),e.push(i));return e},n([c(cc.Graphics)],e.prototype,"bg",void 0),n([c(cc.Graphics)],e.prototype,"circle",void 0),n([c(cc.Graphics)],e.prototype,"highlightCircle",void 0),n([c(cc.Sprite)],e.prototype,"ball",void 0),n([c(cc.Label)],e.prototype,"percent",void 0),n([c(cc.SceneAsset)],e.prototype,"game",void 0),n([c],e.prototype,"jumps",void 0),n([c],e.prototype,"jumpForce",void 0),n([c],e.prototype,"jumpOffset",void 0),n([c],e.prototype,"gravity",void 0),n([c],e.prototype,"speed",void 0),n([c],e.prototype,"currentAngle",void 0),n([c],e.prototype,"previousAngle",void 0),n([c],e.prototype,"distanceFromCenter",void 0),n([c],e.prototype,"revolutions",void 0),n([c],e.prototype,"paintedRatio",void 0),n([c],e.prototype,"paintArcs",void 0),n([c],e.prototype,"restartLock",void 0),n([p],e)}(cc.Component);i.default=h,cc._RF.pop()},{}]},{},["game"]);